<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Poll App</title>
  </head>
  <body>
    <h1>Poll Application</h1>
    <button id="answerPollBtn">Answer Poll</button>

    <script>
      // The poll object to store the question, options, and answers
      const poll = {
        question: "What is your favourite programming language?",
        options: ["0: JavaScript", "1: Python", "2: Rust", "3: C++"],
        answers: [0, 0, 0, 0],

        // Method to register a new answer
        registerNewAnswer: function () {
          // Prompt the user for input
          const answer = prompt(
            `${this.question}\n${this.options.join(
              "\n"
            )}\n(Write option number)`
          );

          // Check if the input is a valid number and within the correct range
          const answerNumber = Number(answer);
          if (answerNumber >= 0 && answerNumber < this.answers.length) {
            // Increment the selected answer's count
            this.answers[answerNumber]++;
            console.log(`Answer registered!`);

            // Display results after each answer is registered
            this.displayResults();
          } else {
            console.log("Invalid input, please select a valid option number.");
          }
        },

        // Method to display the results in either array or string format
        displayResults: function (type = "array") {
          if (type === "array") {
            // Display the results as an array
            console.log(this.answers);
          } else if (type === "string") {
            // Display the results as a string
            console.log(`Poll results are ${this.answers.join(", ")}`);
          } else {
            console.log(
              'Invalid type specified. Please use "array" or "string".'
            );
          }
        },
      };

      // Button to trigger the poll answer
      document
        .getElementById("answerPollBtn")
        .addEventListener("click", function () {
          poll.registerNewAnswer();
        });

      // Bonus: Displaying results with test data
      const testData1 = [5, 2, 3];
      const testData2 = [1, 5, 3, 9, 6, 1];

      // Display the results for the test data (using both 'array' and 'string' format)
      poll.displayResults.call({ answers: testData1 }, "array");
      poll.displayResults.call({ answers: testData1 }, "string");

      poll.displayResults.call({ answers: testData2 }, "array");
      poll.displayResults.call({ answers: testData2 }, "string");
    </script>
  </body>
</html>
